<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="gallery">
    <!-- 갤러리 번호 조회 -->
    <select id="getGalleryNo" parameterType="int" resultType="int">
        <![CDATA[
        SELECT
            galleryNo
        FROM gallery
        where meetno = #{meet}
        ]]>
    </select>

    <!-- 갤러리 이미지 등록 -->
    <insert id="insertGalleryImage" parameterType="com.firmeet.vo.GalleryImgVo">
        <![CDATA[
        INSERT INTO gallery_img (imgno
            , galleryno
            , imgname
            , imgsave
            , imgsize
            , imgroot
            , regdate)
        VALUES (SEQ_G_IMGNO.NEXTVAL
        , #{galleryNo}
        , #{imgName}
        , #{imgSave}
        , #{imgSize}
        , #{imgRoot}
        , SYSDATE)
        ]]>
    </insert>

    <!-- 갤러리 목록 조회 -->
    <select id="getGalleryList" parameterType="int" resultType="com.firmeet.vo.GalleryVo">
        <![CDATA[
        SELECT
            galleryNo
            , id as clubid
            , meetno
            , memberid
        FROM gallery
        where Id = #{clubId}
        ]]>
    </select>
    
    <!-- 갤러리이미지 목록 조회 -->
        <select id="getGalleryImg" parameterType="int" resultType="com.firmeet.vo.GalleryImgVo">
        <![CDATA[
        SELECT
            imgno
            , galleryno
            , imgname
            , imgsave
            , imgsize
            , imgroot
            , regdate
        FROM gallery_img
        where GalleryNo = #{GalleryNo}
        ]]>
    </select>
</mapper>
